# 2023-10-24

## shouldOverrideUrlLoading μ¶”κ°€ κ³µλ¶€
- μ–΄μ μ— μ΄μ–΄μ„..
  - ν•΄λ‹Ή λ©”μ†λ“λ” μ›Ήλ·°μ— Urlμ΄ λ΅λ“λλ ¤κ³  ν•  λ• νΈμ¶λλ” μ½λ°±.
  - return true <- λ‚΄λ¶€ μ²λ¦¬ μ§„ν–‰ ν›„ URL λ΅λ“ μ¤‘λ‹¨
    - WebView λ‚΄μ—μ„ URLμ„ μ—΄κ±°λ‚ μ™Έλ¶€ λΈλΌμ°μ €λ¥Ό μ—΄κ±°λ‚ λ‹¤λ¥Έ λ°©μ‹μΌλ΅ μ²λ¦¬
  - return false <- WebViewκ°€ μ΄μ–΄μ„ URL λ΅λ“
 
## app version
- [κ³µμ‹ λ¬Έμ„](https://developer.android.com/studio/publish/versioning?hl=ko)
### λ²„μ „ κ΄€λ¦¬κ°€ μ¤‘μ”ν• μ΄μ ?
- μ‚¬μ©μλ” κΈ°κΈ°μ— μ„¤μΉλ λ²„μ „κ³Ό μ„¤μΉν•  μ μλ” μ—…κ·Έλ μ΄λ“ λ²„μ „μ— κ΄€ν• μ •λ³΄λ¥Ό μ•μ•„μ•Ό ν•λ‹¤.
- λ¬¶μ ν•νƒλ΅ μ•±μ„ κ²μ‹ν•  κ²½μ°, λ‹¤λ¥Έ μ•±μ€ μ•±μ λ²„μ „μ„ μΏΌλ¦¬ν•΄μ„ νΈν™μ„±μ„ ν™•μΈν•κ³ , μΆ…μ† ν•­λ©μ„ νμ•…ν•΄μ•Ό ν•λ‹¤.
- κ²μ‹ μ„λΉ„μ¤μ—μ„ μ•± λ²„μ „μ„ ν™•μΈν•΄μ„ μ‚¬μ©μμ—κ² μ—…κ·Έλ μ΄λ“/λ‹¤μ΄κ·Έλ μ΄λ“ ν•  μ μλ„λ΅ μ λ„ν•  μ μλ‹¤.
### λ²„μ „ λ²νΈ
- `versionCode`
  - μ–‘μ μ •μ, λ‚΄λ¶€ λ²„μ „ λ²νΈ
  - ν• λ²„μ „μ΄ λ‹¤λ¥Έ λ²„μ „λ³΄λ‹¤ μµμ‹ μΈμ§€ ν‘μ‹ν•λ©°, λ²νΈκ°€ λ†’μ„ μλ΅ μµμ‹  λ²„μ „
  - μ‚¬μ©μμ—κ² ν‘μ‹λλ” λ²„μ „ λ²νΈκ°€ μ•„λ‹κ³ , Android μ‹μ¤ν… λ‚΄μ—μ„ μ‚¬μ©ν•λ” λ²νΈ.
    - versionCodeκ°€ ν„μ¬ κΈ°κΈ°μ— μ„¤μΉλμ–΄ μλ” λ²„μ „λ³΄λ‹¤ λ‚®μ€ apkλ¥Ό μ‚¬μ©μκ°€ μ„¤μΉ λ»ν•λ„λ΅ ν•λ‹¤.
  - google playλ” <= 2100000000
- `versionName`
  - μ‚¬μ©μμ—κ² ν‘μ‹λλ” λ²„μ „ λ²νΈλ΅ μ‚¬μ©λλ” λ¬Έμμ—΄
  - `<major>.<minor>.<point>`
  - μ μΌν•κ² μ‚¬μ©μμ—κ² ν‘μ‹λλ” κ°’
- μ°Έκ³ ) μ‹¤μ λ΅ Firebase App Distributionμ— ν…μ¤νΈ μ„λ²„λ΅ λ°°ν¬ν•λ©΄, μ¶μ‹λ²„μ „μ—λ„ ν‘μ‹λλ‹¤ !_!
  - *1.14.6 (92)*

## Intent
- [κ³µμ‹ λ¬Έμ„](https://developer.android.com/guide/components/intents-filters?hl=ko#Receiving)
### μ •μ
- μΌμΆ…μ λ©”μ‹μ§• κ°μ²΄λ΅, λ‹¤λ¥Έ μ»΄ν¬λ„νΈμ— μ‘μ—…μ„ μ”μ²­ν•λ” λ° μ‚¬μ©λλ‹¤.
  - λ€ν‘μ μΈ μμ‹
    - μ•΅ν‹°λΉ„ν‹° μ‹μ‘
    - μ„λΉ„μ¤ μ‹μ‘
    - λΈλ΅λ“ μΊμ¤νΈ μ „λ‹¬
### μ ν•
- **λ…μ‹μ  μΈν…νΈ(Explicit intents)**
  - λ…μ‹μ μΌλ΅ λ€μƒ μ•± or μ»΄ν¬λ„νΈ ν΄λμ¤ μ΄λ¦„μ„ μ§€μ •
- **μ•”μ‹μ  μΈν…νΈ(Implicit intents)**
  - μν–‰ν•  μΌλ°μ μΈ μ‘μ—…μ„ μ„ μ–Έν•΄ λ‹¤λ¥Έ μ•±μ μ»΄ν¬λ„νΈκ°€ μ²λ¦¬ν•  μ μλ„λ΅ ν•¨
  - λ³„λ„μ μ•±μ—μ„ μ‹¤ν–‰ν•λ ¤λ©΄ μ•”μ‹μ  μΈν…νΈ μ‚¬μ©([κ³µμ‹ λ¬Έμ„](https://developer.android.com/training/basics/intents/sending?hl=ko))
  - ex. μ§€λ„μ— μλ” μ„μΉ ν‘μ‹ -> ν•΄λ‹Ή κΈ°λ¥μ„ κ°–μ¶ λ‹¤λ¥Έ μ•±μ΄ μ§€μ •λ μ„μΉλ¥Ό μ§€λ„μ— ν‘μ‹
- μ°Έκ³ ) Serviceλ¥Ό μ‹μ‘ν•  λ•μ—λ” ν•­μƒ λ…μ‹μ  μΈν…νΈλ§ μ‚¬μ©ν•΄λΌ
  - μ•”μ‹μ  μΈν…νΈλ¥Ό μ‚¬μ©ν–μ„ κ²½μ° **λ³΄μ•** μ„ν—
   - μΈν…νΈμ— μ–΄λ μ„λΉ„μ¤κ°€ μ‘λ‹µν•  μ§€ ν™•μ‹ ν•  μ μ—†κ³ , μ‚¬μ©μλ” μ–΄λ μ„λΉ„μ¤κ°€ μ‹μ‘λλ”μ§€ λ³Ό μ μ—†μ
   - API 21 λ¶€ν„°λ” μ•”μ‹μ  μΈν…νΈλ΅ bindService() νΈμ¶ν•λ©΄ μμ™Έ λ°μƒ

### Intent Build
- Component Name: μ‹μ‘ν•  μ»΄ν¬λ„νΈ μ΄λ¦„. ν•΄λ‹Ή μ •λ³΄λ΅ μΈν…νΈκ°€ λ…μ‹μ μ΄ λλ‹¤. Serviceμ κ²½μ° λ°λ“μ‹ λ…μ‹
- Action: μν–‰ν•  μ‘μ—…
  - Intent ν΄λμ¤λ‚ λ‹¤λ¥Έ ν”„λ μ„μ›ν¬ ν΄λμ¤κ°€ μ •μν• μ‘μ—… μƒμ μ§€μ •
  - ex) Intent.ACTION_VIEW: μ•΅ν‹°λΉ„ν‹°κ°€ μ‚¬μ©μμ—κ² ν‘μ‹ν•  μ μλ” μ–΄λ–¤ μ •λ³΄λ¥Ό κ°€μ§€κ³  μμ„ λ•.
- Data: μ‘μ—…μ„ μν–‰ν•  λ°μ΄ν„° νΉμ€ ν•΄λ‹Ή λ°μ΄ν„°μ MIME μ ν•μ„ μ°Έμ΅°ν•λ” URI
- Category: μ»΄ν¬λ„νΈ μΆ…λ¥μ— λ€ν• μ¶”κ°€ μ •λ³΄
  - λ€λ¶€λ¶„μ μ΄ν…νΈμ—λ” μΉ΄ν…κ³ λ¦¬κ°€ μ—†μ–΄λ„ λλ‹¤.
  - CATEGORY_BROWSABLE, CATEGORY_LAUNCHER λ“± 
- Extras: μ”μ²­λ μ‘μ—…μ„ μν–‰ν•λ”λ° ν•„μ”ν• μ¶”κ°€ μ •λ³΄κ°€ λ‹΄κΈ΄ ν‚¤-κ°’ μ
- Flags: μΈν…νΈμ λ©”νƒ€λ°μ΄ν„°
  - ex. μ•΅ν‹°λΉ„ν‹° μ‹μ‘ λ°©λ²•, νΉμ€ μ•΅ν‹°λΉ„ν‹° μ‹μ‘ν• λ‹¤μ μ–΄λ–»κ² μ²λ¦¬ν•λ”μ§€ λ“±λ“± 

### λ…μ‹μ  μΈν…νΈ μμ‹
- μ•± μ•μ— μ›Ή μƒμ—μ„ νμΌμ„ λ‹¤μ΄λ΅λ“ ν•λ” DownloadServiceλ¥Ό κµ¬μ¶•
  ```kotlin
    val downloadIntent = Intent(this, DownloadService::class.java).apply {
        data = Uri.parse(fileUrl)
    }
    startService(downloadIntent)
  ```

### μ•”μ‹μ  μΈν…νΈ μμ‹
- μ‘μ—…μ„ μ§€μ •ν•΄ κΈ°κΈ°μ—μ„ ν•΄λ‹Ή μ‘μ—…μ„ μν–‰ν•  μ μλ” λ¨λ“  μ•± νΈμ¶
- μ) μ‚¬μ©μκ°€ λ‹¤λ¥Έ μ‚¬λλ“¤κ³Ό κ³µμ ν–μΌλ©΄ ν•λ” μ»¨ν…μΈ λ¥Ό κ°€μ§€κ³  μμ„ λ•, `ACTION_SEND` μ‘μ—… μλ” μΈν…νΈ μƒμ„± ν›„, μ½ν…μΈ λ¥Ό μ§€μ •ν•λ” μ—‘μ¤νΈλΌ μ¶”κ°€
- λ§μ•½ ν•΄λ‹Ή μ•±μ΄ μ—†μΌλ©΄ μ–΄λ–΅ν•μ£ ..?
  - κ·Έλ° κ²½μ°λ¥Ό λ€λΉ„ν•΄μ„ `resolveActivity()`κ°€ μλ”°
  - ν•΄λ‹Ή κ°’μ΄ null μ΄λ©΄ μ•±μ΄ μ—†κ³ , μ•„λ‹λ©΄ μΌμΉν•λ” μ•±μ΄ μλ‹¤λ” λ».
  - μ΄λ¥Ό ν†µν•΄ if λ¬ΈμΌλ΅ λ¶„κΈ°ν•μ—¬ startActivity()λ¥Ό νΈμ¶ν•λ„λ΅ ν•  μ μλ”°!
    ``` kotlin
    // Create the text message with a string
    val sendIntent = Intent().apply {
        action = Intent.ACTION_SEND
        putExtra(Intent.EXTRA_TEXT, textMessage)
        type = "text/plain"
    }
    
    // Verify that the intent will resolve to an activity
    if (sendIntent.resolveActivity(packageManager) != null) {
        startActivity(sendIntent)
    }
    ```
### intent filter
- μμ‹ ν•  μ μλ” μ•”μ‹μ  μΈν…νΈλ¥Ό μ•λ¦¬κΈ° μ„ν•΄, intent filterλ¥Ό μ¶”κ°€ν•κ² λλ‹¤.
  - λ§μ•½ μ§€λ„κ°€ κ°€λ¥ν•λ‹¤ => ν•΄λ‹Ή activityμ intent filterμ— λ‚ μ§€λ„ κ°€λ¥!! μ΄λΌκ³  μ•λ ¤μ£ΌκΈ°
- μλ¥Ό λ“¤λ©΄ ACTION_SEND μΈν…νΈλ¥Ό μμ‹ ν•  μΈν…νΈ ν•„ν„°κ°€ μλ” μ•΅ν‹°λΉ„ν‹° μ„ μ–Έμ κ²½μ°
  ```
  <activity android:name="ShareActivity">
      <intent-filter>
          <action android:name="android.intent.action.SEND"/>
          <category android:name="android.intent.category.DEFAULT"/>
          <data android:mimeType="text/plain"/>
      </intent-filter>
  </activity>
  ```
- μ£Όμμ‚¬ν•­
  - exported=false
    - Android Manifestμ—μ„ activityλ¥Ό μ„ μ–Έν•  λ•, μ²μ μ‹¤ν–‰λλ” Activityλ¥Ό μ μ™Έν•κ³  exported = falseλ¥Ό λ³΄ν†µ ν•κ² λλ‹¤.
    - μ΄λ” λ‹¤λ¥Έ μ•±μ΄ λ‚΄ μ•± μ»΄ν¬λ„νΈμ— μ ‘κ·Όν•μ§€ λ»ν•λ„λ΅ ν•κΈ° μ„ν•¨
  - μ¶”κ°€λ΅, μλ„μΉ μ•κ² λ‹¤λ¥Έ μ•±μ Serviceλ¥Ό μ‹¤ν–‰ν•λ” μΌμ„ ν”Όν•λ ¤λ©΄, ν•­μƒ λ…μ‹μ  μΈν…νΈλ¥Ό μ‚¬μ©ν•΄ λ³ΈμΈμ μ„λΉ„μ¤λ¥Ό μ‹μ‘ν•λΌκ³  ν•¨.

## Javaμ switch λ¬Έκ³Ό Kotlinμ when μ 
- λ‘μ€ ν•­μƒ λ€μ²΄ κ°€λ¥ν•κ°€? --> NO....!
- μμ „μ— Javaλ΅ μ‚¬μ „ κ³Όμ  μ£Όμ…¨μ„ λ• μ΄λ° κ² μμ—λ‹¤.
  ``` java
      @Override
      public boolean onOptionsItemSelected(@NonNull MenuItem item) {
          int itemId = item.getItemId();
          if (itemId == R.id.action_notice) {
              return true;
          } else if (itemId == R.id.action_lockscreen) {
              return true;
          }
          return super.onOptionsItemSelected(item);
      }
  ```
  - μ—¬κΈ°μ„ switch λ¬Έ μ‚¬μ©ν–μ–΄μ•Ό ν–μ. kotlinμ when μ μ€ λλ”λ°...!
  - switch λ¬Έμ—λ” μ‚¬μ‹¤ μ μ•½ μ‚¬ν•­μ΄ μ΅΄μ¬ν•λ‹¤.
    1. switch λ¬Έμ κ²°κ³Όλ” μ •μ νΉμ€ λ¬Έμμ—΄μ΄μ–΄μ•Ό ν•λ‹¤.
    2. case λ¬Έμ κ°’μ€ μ •μ, μƒμ(λ¬Έμ ν¬ν•¨), λ¬Έμμ—΄λ§ κ°€λ¥ν•λ©°, μ¤‘λ³µλμ–΄μ„λ” μ•λλ‹¤.
  - break;μ„ ν•μ§€ μ•μΌλ©΄ case λ¬Έμ΄ μ΄μ–΄μ„ μ‹¤ν–‰λλ‹¤λ” κ²ƒλ„ μ°¨μ΄μ   
- κ·Έλ ‡λ‹¤λ©΄ Kotlinμ when μ μ€?
  - κ·Έλ° μ μ•½ μ‚¬ν•­ λ”°μ„ μ—†μ. => β¨ifλ¬ΈμΌλ΅ μ™„μ „ λ€μ²΄ κ°€λ¥β¨
  - μ„μ—μ„ itemId ν–λ κ²ƒλ„ kotlinμΌλ΅ λ°”κΏ”μ„ ν•΄κ²°ν•  μ μμ !_!
  ``` kotlin
      override fun onOptionsItemSelected(item: MenuItem): Boolean {
        return when (item.itemId) {
            R.id.action_notice -> true
            R.id.action_lockscreen -> true
            else -> super.onOptionsItemSelected(item)
        }
      }
  ```
- μ†”μ§ν μ„ κ°™μ€ menu id κ²€μ‚¬ν•λ” κ±΄ μ•λ“λ΅μ΄λ“ κ°λ°ν•΄λ³΄λ©΄ μ •λ§ λ§μ΄ μ“°μ΄κ³  μƒλ΅ μ¶”κ°€λ  κ°€λ¥μ„±μ΄ λ§λ‹¤. κ·Έλ° μλ―Έν•΄μ„ μ½”ν‹€λ¦° when μ  μµκ³ ... π‘

## κΈ°νƒ€
- [skydoves λ‹μ μ¤ν” μ†μ¤ λ§¤μ»¤λ‹μ¦ ν¬μ¤ν… μ½κΈ°](https://velog.io/@skydoves/open-source-machenism)
  - μ „λ°μ μΈ μ¤ν”μ†μ¤ μƒνƒκ³„μ™€ λΌμ΄ν”„μ‚¬μ΄ν΄, μ„±κ³µμ μΈ μ¤ν”μ†μ¤ μ „λµμ— λ€ν•μ—¬.
  - μ¤ν”μ†μ¤λ¥Ό ν†µν•΄ μ–»μ„ μ μλ” μ΄μµ.
  - Streamμ—μ„ μ¤ν”μ†μ¤λ¥Ό μ κ·Ή μ§€μ›
- [Pending Intent](https://developer.android.com/guide/components/intents-filters?hl=ko#PendingIntent)
