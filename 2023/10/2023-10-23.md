![image](https://github.com/tnwlsgk1002/TIL/assets/76458724/e19d7852-cad9-48e6-a65a-ff9b0ebc1142)# 2023-10-23

## WebView

### ì •ì˜
- í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¼ë¶€ë¡œ ì›¹í˜ì´ì§€ë¥¼ í‘œì‹œí•  ë•Œ, `WebView`ë¥¼ ì‚¬ìš©í•œë‹¤.
- ê¸°ë³¸ ê¸°ëŠ¥ì€ ì›¹í˜ì´ì§€ í‘œì‹œ
  - ì‚¬ìš©ì ê°€ì´ë“œ ë“± ëŠ˜ ìµœì‹ ì˜ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ì–´ì•¼ í•  ë•Œ.
  - **í•­ìƒ ì¸í„°ë„·ì´ ì—°ê²°ë˜ì–´ì•¼ í•  ë•Œ** 
  - ì¤‘ê°„ ê³¼ì •(ë„¤íŠ¸ì›Œí¬ ìš”ì²­í•´ì„œ íŒŒì‹±í•˜ê³  ë Œë”ë§í•˜ê¸°)ì„ ìƒëµí–ˆì„ ë•Œ í¸ë¦¬í•´ì„œ ì‚¬ìš©í•œë‹¤.

### Bridge - JavascriptInterface
- ì‚¬ì „ì  ì •ì˜: ì—´ì°¨ì˜ ì°¨ëŸ‰ê³¼ ì°¨ëŸ‰ì„ ì—°ê²°í•˜ëŠ” ì¥ì¹˜ => Androidì™€ WebViewë¥¼ `ì—°ê²°`í•˜ëŠ” ì—­í• 
- ê°œë°œì—ì„œëŠ” Androidì™€ WebViewì˜ í†µì‹ ì„ ìœ„í•´ ë§Œë“¤ì–´ì§€ëŠ” Javascriptìš© ì¸í„°í˜ì´ìŠ¤
- ì˜ˆì‹œ) ë§Œì•½ WebViewì— ë¡œë“œëœ ì›¹í˜ì´ì§€ì— ìˆëŠ” ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ, Androidìª½ì—ì„œ íŒì—…ì„ ë„ìš°ë„ë¡ í•˜ê³  ì‹¶ë‹¤
  -> Bridgeë¼ëŠ” í†µë¡œë¥¼ ì´ìš©í•´ì„œ Androidì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë„ë¡ ë§Œë“ ë‹¤.
- ì˜ˆì œ) [WebViewì˜ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ Toastë¥¼ ë„ìš°ëŠ” ì˜ˆì œ](https://gist.github.com/tnwlsgk1002/fc5f17bc7b2b038fe859b28d75cf088e)

  ![image](https://github.com/tnwlsgk1002/TIL/assets/76458724/23ae973c-2c6c-47ba-8447-14613cf3424d)
  - í•µì‹¬ì€ interface classë¥¼ ë§Œë“¤ì–´ì„œ, `@JavascriptInterface`ë¥¼ ë‹¨ functionì„ ë§Œë“ ë‹¤ëŠ” ê²ƒ.
=> ê·¸ëŸ¬ë©´ ê²°êµ­ í˜‘ì—…í•  ë•Œ, Nativeì—ì„œ ì–´ë–¤ ì‘ì—…ì„ í•´ì•¼ í•˜ëŠ”ì§€ ì°¾ê³  -> í•´ë‹¹ ì‘ì—…ì„ ë”°ë¡œ ë§Œë“ ë‹¤.
  - ê·¸ëŸ¬ë‚˜ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ë•Œ **í•¨ìˆ˜ì˜ ì´ë¦„**, ê·¸ë¦¬ê³  addJavascriptInterface ì‹œ **íŒŒë¼ë¯¸í„°ì— ë“¤ì–´ê°€ëŠ” ì´ë¦„**ê¹Œì§€ëŠ” ë…¼ì˜ê°€ í•„ìš”í•¨.

### WebViewClient
- WebView ì‚¬ìš© ì‹œ ë°œìƒí•˜ëŠ” ì¼ì— ëŒ€í•œ ì½œë°±ì„ ì§€ì›í•˜ëŠ” ë©”ì„œë“œ.
- ì˜ˆë¥¼ ë“¤ë©´, WebViewì—ì„œ ì›¹í˜ì´ì§€ ë¡œë“œë¥¼ í•˜ëŠ” ì‹œì ì—ì„œ `onPageStarted()` -> `onPageFinished()`ê°€ ì°¨ë¡€ë¡œ í˜¸ì¶œëœë‹¤.
- íšŒì‚¬ì—ì„œëŠ” `shouldOverrideUrlLoading`ì„ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°, api ë²„ì „ì— ë”°ë¼ í•¨ìˆ˜ê°€ ì•½ê°„ ë‹¤ë¥´ë‹¤.
  - api 24 ë²„ì „ ì´í•˜: `override fun shouldOverrideUrlLoading(view: WebView?, url: String?): Boolean`
  - api 24 ë²„ì „ ì´ìƒ: `override fun ã…Š(view: WebView?,request: WebResourceRequest?): Boolean`
  - 


### ì§€ê¸ˆ ê³µë¶€í•˜ê³  ì‹¶ì€ ê²ƒë“¤
- Flow: ê³µì‹ ë¬¸ì„œ ì •ë¦¬í•˜ê¸°(ë…¸ì…˜ì— ìˆëŠ” ê±° ê·¸ëŒ€ë¡œ dev-wikiì— ì˜®ê¸°ê³ ..)
- Intent: íšŒì‚¬ì—ì„œ Intent(Intent.ACTION_VIEW, Uri.parse(shareUrl))ì„ ì‚¬ìš©í•˜ëŠ”ë°, ì´ê²Œ ë­ì§€.. ì‹¶ì–´ì„œ ë³´ë‹¤ê°€
  - Intentì—ë„ Intent Filters, Explicit Intents, Implicit Intentsê°€ ìˆë‹¤ê³  í•˜ëŠ”ë°.. ì²˜ìŒ ë“¤ì–´ë³¸ë‹¤. ğŸ˜± ê¸´ê¸‰ê¸´ê¸‰
- Mockk ì‚¬ìš©í•´ì„œ í…ŒìŠ¤íŠ¸ í•˜ëŠ”ë²•
- Jetpack Compose <- ì‚¬ì´ë“œì—ì„œ í•˜ì..
